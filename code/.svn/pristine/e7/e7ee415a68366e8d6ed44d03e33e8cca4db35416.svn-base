<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">	
<#include "../../../include/bootstrapTableCommons.html">
<@p.body title="PROXY_SETTINGS_LIST_TITLE"   permissionModule="DELEGATE_CONFIG">
	<@p.searchPanel>
		<@p.searchColumns >
			<@p.input title="TARGET_USER"  field="assignee.name"  permissionCode="TARGET_USER_ACCOUNT" ></@p.input>
			<@p.input title="PROCESS_DEFINITION_NAME" field="processName"  permissionCode="PROCESS_DEFINITION_NAME"></@p.input>
	    	<@p.input title="START_TIME" field="startTimeStart" id="startTimeStart"  permissionCode="START_TIME"></@p.input>
			<@p.input title="END_TIME" field="endTimeEnd"   id="endTimeEnd"  permissionCode="END_TIME"></@p.input>
		</@p.searchColumns>
		<@p.toolbar>
			<@p.button title="BTN_ADD"  permissionCode="DelegateConfigAdd"   url="${baseUrl}/bpm/myoffice/delegateconfig/addInput.do" type="add" iconCls="plus" ></@p.button>
			<@p.button title="BTN_UPDATE" permissionCode="DelegateConfigUpdate" url="${baseUrl}/bpm/myoffice/delegateconfig/updateInput.do"  type="update" iconCls="edit"></@p.button>
			<@p.button title="BTN_DELETE"   permissionCode="DelegateConfigDelete"  url="${baseUrl}/bpm/myoffice/delegateconfig/delete.do"   type="delete" iconCls="trash"></@p.button>
		</@p.toolbar>
	</@p.searchPanel>
	<@p.dataGrid url="${baseUrl}/bpm/myoffice/delegateconfig/list.do" >
		<@p.column checkbox="true"></@p.column>
		<@p.column title="TARGET_USER" field="assignee" width="100"   permissionCode="TARGET_USER" formatter="renderUser"></@p.column>
		<@p.column title="START_TIME" field="startTime" width="150"  permissionCode="START_TIME"></@p.column>
		<@p.column title="END_TIME" field="endTime" width="150"  permissionCode="END_TIME"></@p.column>
		<@p.column title="PROCESS_DEFINITION_NAME" field="processName" width="200"  permissionCode="PROCESS_DEFINITION_NAME"></@p.column>
	</@p.dataGrid>
</@p.body>	
<script type="text/javascript">
function renderUser(value) {
	return value.name + "(" + value.account + ")";
}
$(function(){
	$("#startTimeStart").focus(function(){
		WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:'#F{$dp.$D(\'endTimeEnd\')}'});
	});
	$("#endTimeEnd").focus(function(){
		WdatePicker({dateFmt:'yyyy-MM-dd',minDate:'#F{$dp.$D(\'startTimeStart\')}'});
	});
});
</script>
